# RAG Vectorstore Search - Architecture Diagram

## System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React Component)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  AgenticAIPage.jsx                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ RAG Search Card                                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ Input Field: [Enter search query...]                           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Button: "Search Documents (Top 5)" [Click]                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ handleRAGSearch() {                                           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   ragVectorStoreSearch(query, 5)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   Display results with:                           â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   - Rank (#1-5)                                   â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   - Document ID                                   â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   - Similarity % (color coded)                   â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚   - Document preview (300 chars)                â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ }                                                 â”‚          â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                                         â”‚
â”‚                                     â”‚                                         â”‚
â”‚  api.js                             â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ export const ragVectorStoreSearch â”‚                                    â”‚  â”‚
â”‚  â”‚   = (query, topK = 5) =>          â”‚                                    â”‚  â”‚
â”‚  â”‚   api.get('/rag/vectorstore-search',                                  â”‚  â”‚
â”‚  â”‚     params: { query, top_k: topK } â”‚                                   â”‚  â”‚
â”‚  â”‚   );                              â”‚                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    HTTP GET Request   â”‚
                    /rag/vectorstore-search?query=X&top_k=5
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND (FastAPI)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  app.py                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ app.include_router(rag_vectorstore_search.router)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                                         â”‚
â”‚                                     â–¼                                         â”‚
â”‚  rag_vectorstore_search.py                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  @router.get("/rag/vectorstore-search")                             â”‚   â”‚
â”‚  â”‚  def rag_vectorstore_search(query, top_k=5):                        â”‚   â”‚
â”‚  â”‚     â”œâ”€ Validate query (not empty)                                  â”‚   â”‚
â”‚  â”‚     â”œâ”€ Call _search_vectorstore(query, top_k)                      â”‚   â”‚
â”‚  â”‚     â”‚   â”œâ”€ Load Vectorstore Files                                  â”‚   â”‚
â”‚  â”‚     â”‚   â”‚  â””â”€ _load_vectorstore_files()                            â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â”œâ”€ Scan: backend/storage/                            â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â”œâ”€ Load: vectorstore*.json                           â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â””â”€ Read embeddings from each file                   â”‚   â”‚
â”‚  â”‚     â”‚   â”‚                                                           â”‚   â”‚
â”‚  â”‚     â”‚   â”œâ”€ Encode Query                                            â”‚   â”‚
â”‚  â”‚     â”‚   â”‚  â””â”€ query_embedding = model.encode(query)               â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     (Using: sentence-transformers/all-MiniLM-L6-v2)     â”‚   â”‚
â”‚  â”‚     â”‚   â”‚                                                           â”‚   â”‚
â”‚  â”‚     â”‚   â”œâ”€ Search Documents                                        â”‚   â”‚
â”‚  â”‚     â”‚   â”‚  â””â”€ For each document in vectorstore files:             â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â”œâ”€ Get embedding                                     â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â”œâ”€ Calculate similarity (cosine)                    â”‚   â”‚
â”‚  â”‚     â”‚   â”‚     â””â”€ Filter (threshold > 0.1)                         â”‚   â”‚
â”‚  â”‚     â”‚   â”‚                                                           â”‚   â”‚
â”‚  â”‚     â”‚   â”œâ”€ Sort Results                                            â”‚   â”‚
â”‚  â”‚     â”‚   â”‚  â””â”€ Sort by similarity_score DESC                        â”‚   â”‚
â”‚  â”‚     â”‚   â”‚                                                           â”‚   â”‚
â”‚  â”‚     â”‚   â””â”€ Limit to top_k                                          â”‚   â”‚
â”‚  â”‚     â”‚      â””â”€ Return top 5 results                                 â”‚   â”‚
â”‚  â”‚     â”‚                                                               â”‚   â”‚
â”‚  â”‚     â””â”€ Return Response JSON                                        â”‚   â”‚
â”‚  â”‚        {                                                            â”‚   â”‚
â”‚  â”‚          "search_results": [                                       â”‚   â”‚
â”‚  â”‚            {                                                        â”‚   â”‚
â”‚  â”‚              "vectorstore": "...",                                 â”‚   â”‚
â”‚  â”‚              "document_id": "...",                                 â”‚   â”‚
â”‚  â”‚              "text": "...",                                        â”‚   â”‚
â”‚  â”‚              "similarity_score": 0.85,                             â”‚   â”‚
â”‚  â”‚              "similarity_percentage": 85.0,                        â”‚   â”‚
â”‚  â”‚              "metadata": {...}                                     â”‚   â”‚
â”‚  â”‚            }, ...                                                  â”‚   â”‚
â”‚  â”‚          ],                                                         â”‚   â”‚
â”‚  â”‚          "total_matches": 5                                        â”‚   â”‚
â”‚  â”‚        }                                                            â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  Storage Directory (Vectorstore Files)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ backend/storage/                                                 â”‚   â”‚
â”‚  â”‚ â”œâ”€ vectorstore.json                                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ vectorstore_upload_28.json                                    â”‚   â”‚
â”‚  â”‚ â”‚  {                                                              â”‚   â”‚
â”‚  â”‚ â”‚    "requirement_28": {                                         â”‚   â”‚
â”‚  â”‚ â”‚      "text": "Product Requirements Document...",               â”‚   â”‚
â”‚  â”‚ â”‚      "embedding": [0.0234, -0.0451, ...],                     â”‚   â”‚
â”‚  â”‚ â”‚      "metadata": {"type": "requirement", ...}                 â”‚   â”‚
â”‚  â”‚ â”‚    },                                                           â”‚   â”‚
â”‚  â”‚ â”‚    ...                                                          â”‚   â”‚
â”‚  â”‚ â”‚  }                                                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ vectorstore_upload_29.json                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ vectorstore_upload_30.json                                    â”‚   â”‚
â”‚  â”‚ â””â”€ vectorstore_upload_31.json                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    HTTP Response      â”‚
                    JSON with Results  â”‚
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND - Display Results                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  Results Grid:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ #1 - requirement_28  [vectorstore_upload_28]  [85.4% match] ğŸŸ¢     â”‚    â”‚
â”‚  â”‚ Document text preview... (300 chars)                               â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ #2 - specification_29  [vectorstore_upload_29]  [82.1% match] ğŸŸ¢   â”‚    â”‚
â”‚  â”‚ Document text preview... (300 chars)                               â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ #3 - design_30  [vectorstore_upload_30]  [65.8% match] ğŸŸ¡          â”‚    â”‚
â”‚  â”‚ Document text preview... (300 chars)                               â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ #4 - feature_31  [vectorstore_upload_31]  [52.3% match] ğŸŸ¡         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ #5 - reference_28  [vectorstore.json]  [48.9% match] ğŸ”´            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                               â”‚
â”‚  Color Coding:                                                                â”‚
â”‚  ğŸŸ¢ Green:  >70% match (excellent)                                           â”‚
â”‚  ğŸŸ¡ Yellow: 50-70% match (good)                                              â”‚
â”‚  ğŸ”´ Red:    <50% match (fair)                                                â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Sequence

```
User Input
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enter Search Query      â”‚
â”‚ "camera requirements"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click Search Button     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: handleRAGSearch()                                      â”‚
â”‚   - ragVectorStoreSearch(query, 5)                              â”‚
â”‚   - setLoadingRAG(true)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼ HTTP GET /rag/vectorstore-search?query=...&top_k=5
   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: rag_vectorstore_search()                                â”‚
â”‚   1. Validate input (query not empty)                            â”‚
â”‚   2. Load vectorstore JSON files from storage/                   â”‚
â”‚   3. Encode query using SentenceTransformer                      â”‚
â”‚   4. For each document:                                          â”‚
â”‚      - Get document embedding                                    â”‚
â”‚      - Calculate cosine similarity with query                    â”‚
â”‚      - Filter scores > 0.1 threshold                             â”‚
â”‚   5. Sort by similarity_score DESC                               â”‚
â”‚   6. Return top 5 results as JSON                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼ HTTP Response (200 OK)
   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: setRagResults(response.data.search_results)            â”‚
â”‚   - setLoadingRAG(false)                                         â”‚
â”‚   - Render results in color-coded grid                           â”‚
â”‚   - Show success message                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display Results to User â”‚
â”‚ (Top 5 ranked results)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction

```
AgenticAIPage Component
â”‚
â”œâ”€ State
â”‚  â”œâ”€ ragQuery: string (user's search input)
â”‚  â”œâ”€ ragResults: array (search results)
â”‚  â””â”€ loadingRAG: boolean (loading state)
â”‚
â”œâ”€ Functions
â”‚  â””â”€ handleRAGSearch()
â”‚     â”œâ”€ Validates ragQuery
â”‚     â”œâ”€ Calls ragVectorStoreSearch(query, 5)
â”‚     â”œâ”€ Updates ragResults state
â”‚     â””â”€ Shows success/error messages
â”‚
â””â”€ UI
   â””â”€ RAG Search Card
      â”œâ”€ Input: Search field
      â”œâ”€ Action: Search button
      â””â”€ Output: Results display
         â”œâ”€ Result #1 (highest match)
         â”œâ”€ Result #2
         â”œâ”€ Result #3
         â”œâ”€ Result #4
         â””â”€ Result #5 (lowest match)
```

## Technology Stack

```
Frontend
  â”‚
  â”œâ”€ React 18+ (Hooks)
  â”œâ”€ Axios (HTTP Client)
  â”œâ”€ Tailwind CSS (Styling)
  â””â”€ React Icons (UI Components)

API Layer
  â”‚
  â””â”€ API Functions (api.js)
     â””â”€ ragVectorStoreSearch()

Backend
  â”‚
  â”œâ”€ FastAPI
  â”œâ”€ SentenceTransformers (Embeddings)
  â”œâ”€ NumPy (Vector Math)
  â”œâ”€ Python JSON (File I/O)
  â””â”€ FastAPI Routers

Data Storage
  â”‚
  â””â”€ Vectorstore JSON Files
     â”œâ”€ Document content
     â”œâ”€ Embeddings
     â””â”€ Metadata
```

---

**Architecture Version**: 1.0
**Last Updated**: December 9, 2025
