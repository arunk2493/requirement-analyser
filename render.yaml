services:
- type: web
  name: requirement-analyser-api
  runtime: python
  buildCommand: pip install -r backend/requirements.txt
  startCommand: cd backend && gunicorn -w 4 -b 0.0.0.0:10000 app:app
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: requirement-analyser-db
      property: connectionString
  - key: PYTHON_VERSION
    value: 3.11.0

- type: static
  name: requirement-analyser-frontend
  buildCommand: cd frontend && npm install && npm run build
  staticPublishPath: ./frontend/dist
  envVars:
  - key: VITE_API_BASE
    value: https://requirement-analyser-api.onrender.com

databases:
- name: requirement-analyser-db
  databaseName: requirement_analyser
  user: admin
  region: oregon
